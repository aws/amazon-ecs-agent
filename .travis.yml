language: go
go_import_path: github.com/aws/amazon-ecs-agent
sudo: false
go:
  - 1.15

matrix:
  include:
    - os: linux
      script:
        - make get-deps
        - make static-check
        - make test
        - make analyze-cover-profile
        - make xplatform-build
    - os: windows
      script:
        - go test -race -gcflags=all=-d=checkptr=0 -v -tags unit -timeout 40s ./agent/...
